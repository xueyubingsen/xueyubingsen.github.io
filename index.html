<!DOCTYPE html>
<html>
  <head>
    <title>Use G6 from CDN</title>
  </head>
  <body>
    <!-- 1. Prepare container -->
    <div id="container" style="width: 800px; height: 600px"></div>

    <!-- 2. Add Script tag that specific G6 umd url -->
    <script src="https://unpkg.com/@antv/g6@5/dist/g6.min.js"></script>

    

    <script>

const container = document.getElementById('container');

// 生成50个节点
const nodes = Array.from({ length: 50 }, (_, i) => ({
  id: `node-${i}`,
  label: `Node ${i}`,
}));

// 生成随机连接
const edges = [];
for (let i = 0; i < 50; i++) {
  const source = `node-${i}`;
  // 每个节点随机连接到1-5个其他节点
  const targetCount = Math.floor(Math.random() * 5) + 1;
  for (let j = 0; j < targetCount; j++) {
    const target = `node-${Math.floor(Math.random() * 50)}`;
    // 避免自己连接自己和重复连接
    if (source !== target && !edges.some(e => e.source === source && e.target === target)) {
      edges.push({ source, target });
    }
  }
}

// 计算每个节点的入度（指向该节点的连接数）
const inDegree = {};
nodes.forEach(node => {
  inDegree[node.id] = 0;
});

edges.forEach(edge => {
  inDegree[edge.target] = (inDegree[edge.target] || 0) + 1;
});

// 根据入度设置节点大小（入度越多节点越大）
nodes.forEach(node => {
  // 基础大小20，每个入度增加5
  node.size = 20 + (inDegree[node.id] || 0) * 5;
});

const data = {
  nodes,
  edges
};

const graph = new G6.Graph({
  container: 'container',
  width: container.clientWidth,
  height: container.clientHeight,
  data,
  autoFit: 'view',
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'drag-element'],
  },
  layout: {
    type: 'force',
    preventOverlap: true,
    nodeSize: 20,
    gravity: 0.9,
    iterations: 100,
  },
  node: {
    style: {
      size: (d) => d.size,
      fill: '#9EC9FF',
      stroke: '#69C8FF',
      label: (d) => d.label,
      labelPlacement: 'center',
      labelFill: '#333',
    },
  },
  edge: {
    style: {
      stroke: '#e2e2e2',
    },
  },
});

graph.render();

</script>
  </body>
</html>
